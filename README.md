![logo](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAyQOmNXp5T6Sl_8Dvk-RmYDDd3PZ-AsppRx0CKviv-Xdgfzvj3H85lf47chaoxrkjZX4&usqp=CAU)
# Дипломная работа «Поисковая система».

### **Задача:**  
- разработать класс поискового движка, который способен быстро находить указанное слово среди **pdf-файлов**, причём ранжировать результаты по количеству вхождений.  
- Реализовать сервер, который обслуживает входящие запросы с помощью этого движка.
#### *Дополнительное задание:*
- обслуживать полноценный запрос из нескольких слов. Требуется возвращать в качестве результата поиска список из `PageEntry`, только `count` в нём должен теперь содержать суммарное количество раз, которое встретилось любое из слов запроса. При этом слова из списка [стоп-слов](https://github.com/Netology-cp/pcs-final-diplom/blob/main/stop-ru.txt) должны никак не влиять на запрос.

##### Примечание: pdf-файлы, по которым будет искать поисковый движок, находятся в папке /pdfs рабочего проекта. 

#### Ресурсы: для работы с pdf-документами используется библиотека `com.itextpdf:itext7-core:7.1.15`, подключение:
       <dependency>
            <groupId>com.itextpdf</groupId>
            <artifactId>itext7-core</artifactId>
            <version>7.1.15</version>
            <type>pom</type>
        </dependency>
        
Основные инструменты  этой библиотеки:
* Cоздать объект pdf-документа `var doc = new PdfDocument(new PdfReader(pdf))`.
* Узнать количество  страниц в pdf-документе ` var pages= doc.getNumberOfPages()`.
* Получить объект одной страницы pdf-документа `var page = doc.getPage(номерСтраницы)`.
* Получить текст со pdf-страницы `var text = PdfTextExtractor.getTextFromPage(page);`.

### Реализация.   

| Класс      | Описание |
| ----------- | ----------- |
| `Main`      | запуск сервера, обслуживающего поисковые запросы|
| `PageEntry`   | Класс, описывающий один элемент результата одного поиска. Он состоит из имени pdf-файла, номера страницы и количества раз(`count`), которое встретилось это слово на ней. Реализует интерфейс `Comparable` для сортировки.|
| `SearchEngine`   | Интерфейс, описывающий поисковый движок, содержит 1 метод ` List<PageEntry> search(String request)`|
| `BooleanSearchEngine`   | **Реализация поискового движка.** <ol><li>Движок ищет в тексте ровно то слово, которое было указано, без использования синонимов и прочих приёмов нечёткого поиска, независимо от регистра.</li><li>Для ускорения поиска используется **индексация** - предварительное сканирование файлов в конструкторе класса с сохранением информации для каждого слова в виде `List<PageEntry>`.</li><li>Для сохранения всех результатов индексации используется HashMap(ключ: слово, значение:`List<PageEntry>`).</li>  <li>Метод **search(String request)**  аккумулирует результаты поиска в Map через Collectors.toMap (элементы группируются по ключу: (имя файла:страница) у дубликатов суммируется значение поля count и возвращается 1-й элемент) и возвращает коллекцию значений `values() т.е List<PageEntry>` с итогами поиска</li>|
| `Server`   | сервер, слушающий порт `8085`, на который приходят запросы. Ответ сервера - это результат вызова метода `search(request)`, в виде JSON-текста |

Пример ответа на запрос:
```json
[
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 12,
    "count": 6
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 4,
    "count": 3
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 5,
    "count": 3
  }
]
```
